{
  "GET /api/thumbnail": "Return JPEG thumbnail for a video (200) or 404 if missing",
  "HEAD /api/thumbnail": "Probe thumbnail existence for a video (200 present, 404 missing)",
  "POST /api/thumbnail": "Generate/update a thumbnail at a given timestamp (query: path, time[, quality])",
  "POST /api/thumbnail/batch": "Generate thumbnails for multiple videos under a directory (query/body: path, recurse)",
  "POST /api/thumbnail/create/sync": "Synchronously generate a thumbnail for a single video (blocking)",
  "DELETE /api/thumbnail": "Delete thumbnail(s) for a single video, list of videos, or subtree (body controls scope)",
  "GET /api/thumbnails": "List videos under a path that currently have thumbnails (supports paging/filtering)",
  "HEAD /api/thumbnails": "Count thumbnails under a path via headers X-Total/X-Have/X-Missing",

  "GET /api/preview": "Stream or download the low-bitrate preview clip for a video (webm/mp4)",
  "GET /api/preview/info": "Inspect preview status/metadata for a video (duration, size, format)",
  "HEAD /api/preview": "Probe preview existence for a video (200/404)",
  "POST /api/preview": "Generate or refresh a preview clip for a video (query: path[, fmt])",
  "POST /api/preview/bg": "Enqueue preview generation as a background job (non-blocking); returns job id",
  "POST /api/preview/batch": "Generate previews for multiple videos under a directory",
  "DELETE /api/preview": "Delete preview(s) for a single video, batch, or subtree (body-controlled)",

  "GET /api/sprites/json": "Return sprites descriptor JSON for a video (frame grid, timings)",
  "GET /api/sprites/list": "List videos with sprite sheets under a path",
  "GET /api/sprites/sheet": "Return sprite sheet image (JPEG) for a video",
  "HEAD /api/sprites/json": "Probe sprite descriptor presence for a video (200/404)",
  "POST /api/sprites/create": "Generate sprite sheet JPG and descriptor JSON for a video",
  "POST /api/sprites/create/batch": "Generate sprites for multiple videos under a directory",
  "DELETE /api/sprites/delete": "Delete sprite JPG+JSON for a single video",
  "DELETE /api/sprites/delete/batch": "Delete sprite artifacts for all videos under a path",
  "HEAD /api/sprites/list": "Count sprite presence under a path via X-Total/X-Have/X-Missing",

  "GET /api/markers": "Read timeline markers for a video (array of {time,name?,label?,scene,intro,outro}; flags default false)",
  "GET /api/markers/store": "Return the full marker store JSON for a video (markers[], and top-level intro/outro mirrors)",
  "PATCH /api/markers": "Update a marker's time/label/name/flags (id by time/type)",
  "POST /api/markers": "Create a marker; supports flags scene|intro|outro. special=intro|outro sets the unique top-level mirror",
  "HEAD /api/markers/store": "Probe marker store presence for a video (200/404)",
  "POST /api/markers/detect": "Run scene detection on a video and persist markers into the store",
  "POST /api/markers/detect/batch": "Run scene detection across many videos and write markers",
  "DELETE /api/markers": "Delete a marker by time/type or clear special intro/outro",
  "DELETE /api/markers/clear": "Remove all markers for a video (also cleans legacy .scenes dir)",
  "DELETE /api/markers/clear/batch": "Remove all markers for videos under a path",
  "GET /api/markers/list": "List videos that have marker stores under a path",
  "HEAD /api/markers/list": "Count marker stores under a path via X-Total/X-Have/X-Missing",

  "GET /api/subtitles": "Return subtitles file (SRT/VTT) for a video (200) or 404 if missing",
  "GET /api/subtitles/list": "List videos that have subtitles under a path",
  "HEAD /api/subtitles/list": "Count subtitles under a path via X-Total/X-Have/X-Missing",
  "HEAD /api/subtitles": "Probe subtitles presence for a video (200/404)",
  "POST /api/subtitles/create": "Generate subtitles for a video via ASR (backend-dependent)",
  "POST /api/subtitles/create/batch": "Generate subtitles for multiple videos under a path",
  "DELETE /api/subtitles/delete": "Delete subtitles file for a single video",
  "DELETE /api/subtitles/delete/batch": "Delete subtitles for all videos under a path",

  "HEAD /api/heatmaps": "Probe heatmaps presence for a video (200 if PNG or JSON exists; 204 if none)",
  "GET /api/heatmaps": "Return heatmap PNG when present; otherwise return JSON stats; 204 if no data",
  "GET /api/heatmaps/list": "List videos that have heatmaps under a path",
  "HEAD /api/heatmaps/list": "Count heatmaps under a path via X-Total/X-Have/X-Missing",
  "POST /api/heatmaps/create": "Compute heatmaps (activity/energy) for a video",
  "POST /api/heatmaps/create/batch": "Compute heatmaps for multiple videos under a path",
  "DELETE /api/heatmaps/delete": "Delete heatmap artifacts for a single video",
  "DELETE /api/heatmaps/delete/batch": "Delete heatmap artifacts for all videos under a path",

  "GET /api/faces": "Return faces.json for a video (detections and embeddings) or 404 if missing",
  "GET /api/faces/json": "Alias for GET /api/faces (JSON)",
  "GET /api/faces/list": "List videos that have faces.json under a path",
  "HEAD /api/faces/list": "Count faces.json presence under a path via X-Total/X-Have/X-Missing",
  "GET /api/faces/listing": "List known faces across the library for UI selection",
  "GET /api/faces/signatures": "List face embedding signatures aggregated across videos",
  "HEAD /api/faces": "Probe faces.json presence for a video (200/404)",
  "POST /api/faces/create": "Detect faces for a video and write faces.json (+optional embeddings)",
  "POST /api/faces/create/batch": "Detect faces for multiple videos under a path",
  "POST /api/faces/upload": "Upload client-detected faces for a video (optionally compute embeddings)",
  "DELETE /api/faces/delete": "Delete faces.json (and related embeddings) for a video",
  "DELETE /api/faces/delete/batch": "Delete faces artifacts for all videos under a path",

  "POST /api/embed/update": "Recompute/update face embedding vectors for a single video",
  "POST /api/embed/update/batch": "Recompute/update face embeddings for multiple videos under a path",

  "GET /api/phash": "Return perceptual hash JSON for a video (aHash/dHash/combined)",
  "GET /api/phash/duplicates": "Find visually similar/duplicate videos using perceptual hashes",
  "HEAD /api/phash": "Probe perceptual hash presence for a video (200/404)",
  "POST /api/phash": "Compute and persist the perceptual hash for a video",
  "POST /api/phash/batch": "Compute perceptual hashes for multiple videos under a directory",
  "DELETE /api/phash": "Delete the perceptual hash JSON for a video",
  "DELETE /api/phash/delete/batch": "Delete perceptual hashes for all videos under a path",
  "GET /api/phashes": "List videos that have perceptual hashes under a path",
  "HEAD /api/phashes": "Count pHashes under a path via X-Total/X-Have/X-Missing",

  "GET /api/subtitles/backend": "Resolve and return the backend-selected subtitle track for a video (internal use)",
  "GET /api/config": "Return server configuration (media root, processing settings, feature flags)",
  "GET /api/library": "Enumerate media files under the current root with lightweight metadata (browsing)",
  "GET /api/duplicates": "Report potential duplicates/near-duplicates across the library via perceptual hash",
  "GET /api/media/info": "Return detailed media info (ffprobe-like: duration, codecs, resolution)",
  "POST /api/media/info/bulk": "Return media info for multiple files in a single request (JSON body with paths[])",
  "POST /api/media/performers/add": "Attach one or more performers to a media file",
  "POST /api/media/performers/remove": "Detach one or more performers from a media file",
  "POST /api/media/rename": "Rename or move a media file on disk (within the media root)",
  "POST /api/media/tags/add": "Add one or more tags to a media file",
  "POST /api/media/tags/bulk-add": "Add tags to multiple media files in a single request",
  "POST /api/media/tags/remove": "Remove one or more tags from a media file",
  "DELETE /api/media/delete": "Delete a media file from disk (and associated artifacts)",

  "GET /api/metadata": "Return metadata JSON for a video (duration, codecs, bitrate, size, timestamps)",
  "GET /api/metadata/list": "List videos that have metadata sidecars under a path",
  "HEAD /api/metadata/list": "Count metadata sidecars under a path via X-Total/X-Have/X-Missing",
  "HEAD /api/metadata": "Probe metadata presence for a video (200/404)",
  "POST /api/metadata/create": "Extract and write metadata JSON for a video",
  "POST /api/metadata/create/batch": "Extract metadata for multiple videos under a path",
  "DELETE /api/metadata/delete": "Delete metadata JSON sidecar for a video",

  "GET /api/performers": "List performer entries in the registry (name, aliases, tags)",
  "POST /api/performers/add": "Create or update a performer entry",
  "POST /api/performers/import": "Bulk import performer entries (JSON payload)",
  "POST /api/performers/merge": "Merge multiple performers into a single canonical entry",
  "POST /api/performers/rename": "Rename a performer and update references",
  "POST /api/performers/tags/add": "Attach tags to a performer",
  "POST /api/performers/tags/remove": "Detach tags from a performer",
  "POST /api/performers/tags/update": "Replace the full tag set for a performer",
  "DELETE /api/performers": "Delete one or more performers from the registry",

  "GET /api/registry/export": "Export the full performers/tags registry as JSON",
  "GET /api/registry/performers": "Export only performers registry entries as JSON",
  "GET /api/registry/tags": "Export only tags registry entries as JSON",
  "POST /api/registry/import": "Import a full or partial registry from JSON (merge)",
  "POST /api/registry/performers/create": "Create a new performer entry in the registry",
  "POST /api/registry/performers/delete": "Delete a performer entry from the registry",
  "POST /api/registry/performers/merge": "Merge multiple performer entries",
  "POST /api/registry/performers/rewrite-sidecars": "Rewrite performer sidecar files across the library",
  "POST /api/registry/performers/update": "Update fields for an existing performer entry",
  "POST /api/registry/tags/create": "Create a new tag in the registry",
  "POST /api/registry/tags/delete": "Delete a tag and strip it from sidecars/media attributes even if it is not yet registered",
  "POST /api/registry/tags/merge": "Merge tags (aliases into canonical)",
  "POST /api/registry/tags/rename": "Rename a tag and update references",
  "POST /api/registry/tags/rewrite-sidecars": "Rewrite tag sidecar files across the library",

  "GET /api/tags": "List all tags with optional filters (search, sort)",
  "GET /api/tags/summary": "Return tag usage summary (counts by tag)",

  "GET /api/tasks/concurrency": "Inspect background job concurrency settings (limits, active)",
  "GET /api/tasks/coverage": "Report artifact coverage (have/missing) across the library",
  "GET /api/tasks/defaults": "Show default processing parameters and tunables",
  "GET /api/tasks/diag": "Diagnostics for workers, queues, and recent failures",
  "GET /api/tasks/jobs": "List background jobs (pending, running, completed)",
  "GET /api/tasks/pause": "Return current pause state for background workers",
  "POST /api/tasks/batch": "Submit a batch of actions (create/delete artifacts) to the job queue",
  "POST /api/tasks/concurrency": "Update background job concurrency settings",
  "POST /api/tasks/jobs/cancel-all": "Cancel all active and queued jobs",
  "POST /api/tasks/jobs/cancel-queued": "Cancel only queued (not-started) jobs",
  "POST /api/tasks/jobs/clear-all": "Clear all jobs from the queue/history",
  "POST /api/tasks/jobs/clear-completed": "Clear completed jobs from history",
  "POST /api/tasks/jobs/clear-restored": "Clear jobs restored from a prior session",
  "POST /api/tasks/jobs/resume-restored": "Resume jobs restored from a prior session",
  "POST /api/tasks/jobs/{job_id}/cancel": "Cancel a specific job by ID",
  "POST /api/tasks/pause": "Pause or resume background workers",

  "GET /api/jobs": "List background jobs with status and progress",
  "GET /jobs/events": "Server-Sent Events stream of job updates (progress, state changes)",
  "GET /jobs/{job_id}": "Get details for a single background job by ID",
  "POST /api/jobs/reap-orphans": "Prune completed, failed, or orphaned background jobs",
  "POST /jobs": "Submit a new background job",
  "DELETE /jobs/{job_id}": "Cancel and remove a background job by ID",

  "GET /api/artifacts/orphans": "List artifact files on disk that are not linked to any media",
  "GET /api/artifacts/status": "Return artifact presence for a video/path (thumbnail, preview, sprites, etc.)",
  "POST /api/artifacts/cleanup": "Delete orphaned artifacts and empty directories under a path",

  "GET /api/frame/boxed": "Extract a frame image with detection boxes overlaid (query: path, time)",
  "GET /api/frame/crop": "Extract and return a cropped frame region (query: path, time, box)",
  "GET /api/stream": "HTTP video streaming endpoint with range support",
  "GET /api/settings/ffmpeg": "Read current ffmpeg-related settings",
  "POST /api/settings/ffmpeg": "Update ffmpeg-related settings",
  "GET /api/stats": "Return library and system statistics (counts, disk usage)",
  "GET /api/report/previews": "Generate a preview coverage report for the library",
  "GET /api/routes": "List all registered API routes (machine-readable)",
  "POST /api/routes/descriptions/export": "Export the documented route descriptions as JSON",
  "GET /api/openapi.json": "OpenAPI specification document under the /api base (JSON)",
  "GET /api/compare": "Compare two videos visually or by metadata (query-driven)",
  "GET /api/compare/metadata": "Return a structured metadata comparison for two videos",
  "POST /api/admin/panic-kill": "Immediately terminate runaway ffmpeg processes and workers",
  "POST /api/autotag/preview": "Dry-run automatic tag assignment and return a preview of changes",
  "POST /api/autotag/scan": "Scan library and assign tags based on filename patterns and metadata",

  "GET /api/health": "Server health status and basic system information (uptime, versions)",
  "GET /api/previews": "List videos that have previews under a path",
  "HEAD /api/previews": "Count previews under a path via X-Total/X-Have/X-Missing",

  "POST /api/setroot": "Set the active media root folder for the server",
  "POST /api/testpath": "Validate that a path is accessible and within the media root",
  "GET /api/root": "Return the current media root folder",
  "POST /api/root/set": "Change the current media root folder",

  "GET /api/videos/{name}/tags": "Get tags and performers associated with a specific video by file name",
  "PATCH /api/videos/{name}/tags": "Update tags/performers/description/rating for a specific video by file name",

  "GET /files/{full_path:path}": "Serve a file by absolute path (within allowed roots)",
  "HEAD /files/{full_path:path}": "Probe file existence and size via headers",

  "GET /docs": "Interactive API documentation (Swagger UI)",
  "GET /docs/oauth2-redirect": "OAuth2 redirect endpoint for Swagger UI",

  "GET /openapi.json": "OpenAPI specification document for this API (JSON)",
  "GET /redoc": "Interactive API documentation (ReDoc)",
  "HEAD /docs": "Probe Swagger UI availability",
  "HEAD /docs/oauth2-redirect": "Probe OAuth2 redirect endpoint availability",
  "HEAD /openapi.json": "Probe OpenAPI document availability",
  "HEAD /redoc": "Probe ReDoc availability",
  "GET /": "Serve the web UI index.html",
  "GET /apple-touch-icon.png": "Serve PWA apple-touch icon",
  "GET /config": "Return front-end boot configuration",
  "GET /favicon.ico": "Serve site favicon",
  "GET /health": "Legacy health endpoint (redirects/aliases to /api/health)",
  "GET /index.css": "Serve the web UI stylesheet",
  "GET /index.js": "Serve the web UI application script",
  "GET /manifest.json": "Serve the PWA manifest",
  "GET /motion": "Visualize audio waveform/motion energy for a video",
  "GET /report": "Render human-readable coverage and status reports",
  "GET /tags/export": "Export tags as JSON/CSV",
  "GET /waveform": "Return audio waveform data for a video",
  "GET /{filepath:path}": "Serve static assets and files (fallback route)",
  "POST /tags/import": "Import tags from JSON/CSV and update registry"
}
